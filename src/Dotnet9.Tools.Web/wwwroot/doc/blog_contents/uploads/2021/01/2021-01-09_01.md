æœ¬æ–‡é˜…è¯»å‰äº†è§£çŸ¥è¯†ï¼š[ä»€ä¹ˆæ—¶å€™éœ€è¦ä½¿ç”¨UrlEncodeå’ŒUrlDecodeå‡½æ•°](https://blog.csdn.net/l754539910/article/details/79640925)

ä½œè€…ä½¿ç”¨è°·æ­Œæµè§ˆå™¨ï¼Œé€šè¿‡æŒ‰ä¸‹F12å¯¹ç¬¬ä¸‰æ–¹ç½‘ç«™httpåè®®çš„æ¥å£æŠ“åŒ…è¿›è¡Œåˆ†ææ“ä½œã€‚

## åœºæ™¯

è¿ç»´å°å“¥å“¥å¶å°”ä½¿ç”¨æŸæŸå¤–åŒ…å…¬å¸çš„ç½‘ç«™ç³»ç»Ÿï¼Œåšè®¾å¤‡å½•å…¥å·¥ä½œï¼Œæµç¨‹ç®€å•ï¼š

![å½•å…¥è®¾å¤‡ä¿¡æ¯](https://img1.dotnet9.com/2021/01/0101.png)

1. å½•å…¥è®¾å¤‡åŸºæœ¬ä¿¡æ¯ï¼Œæœ‰7ã€8ä¸ªå­—æ®µéœ€è¦è¾“å…¥ï¼Œç„¶åç‚¹å‡»ä¿å­˜æŒ‰é’®ï¼›
2. åŸºæœ¬ä¿¡æ¯ä¿å­˜æˆåŠŸï¼Œè¿›å…¥è®¾å¤‡ç±»å‹é€‰æ‹©æ“ä½œï¼Œç„¶åç‚¹å‡»ç”Ÿæˆè®¾å¤‡æ ‡è¯†æŒ‰é’®ï¼›
3. è®¾å¤‡æ ‡è¯†ç”ŸæˆæˆåŠŸï¼Œå½•å…¥è®¾å¤‡å…³è”çš„æ¨¡å—ä¿¡æ¯ï¼Œç®€å•è®¾å¤‡åªéœ€è¦å½•å…¥2æ¡æ¨¡å—ï¼Œå¤æ‚çš„è®¾å¤‡æœ‰6æ¡æ¨¡å—ï¼Œæ¯ä¸ªæ¨¡å—æœ‰3ã€4ä¸ªå­—æ®µéœ€è¦è¾“å…¥ï¼Œæœ€åç‚¹å‡»ä¿å­˜ã€‚

ä¸€æ¡è®¾å¤‡å½•å…¥æˆåŠŸï¼Œå•èº«å¤šå¹´çš„æ‰‹é€Ÿå¯èƒ½ä¹ŸèŠ±ä¸äº†å‡ åˆ†é’Ÿï¼Œå…¶å®è¿™ä¹Ÿæ²¡å•¥ã€‚

çªç„¶é¢†å¯¼è¯´æœ‰1000ä¸ªè®¾å¤‡éœ€è¦æï¼Ÿè¿ç»´å°å“¥å“¥å“­äº†ğŸ˜‚ï¼Œè¿™æ—¶å°±è¯¥å¼€å‘äººå‘˜ä¸Šåœºäº†ï¼š

1. è¿ç»´å‡†å¤‡ä¸€ä¸ªExcelæ¨¡æ¿ï¼Œè¾“å…¥éœ€è¦å½•å…¥çš„1000ä¸ªè®¾å¤‡åŸºæœ¬ä¿¡æ¯ã€è®¾å¤‡ç±»å‹ä¿¡æ¯ï¼Œè¿™ä¸ªå·¥ä½œé‡ä¸å¤§ï¼Œå°±åŠå¤©å§ï¼Œæœ€å¤šä¸€å¤©å·¥ä½œé‡ï¼›
2. å¼€å‘åšä¸ªC/Så®¢æˆ·ç«¯å°å·¥å…·ï¼Œç¨‹åºä¸­æŒ‰ä¸šåŠ¡è¦æ±‚é…ç½®æ¨¡å—å½•å…¥è§„åˆ™ï¼›
3. ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­å½•å…¥ä¸€ä¸ªè®¾å¤‡å°±æŠŠç”Ÿæˆçš„è®¾å¤‡æ ‡è¯†ä¸è®¾å¤‡å…³è”ï¼›
4. å…¨éƒ¨å½•å…¥å®Œæˆï¼Œæä¾›ä¸€ä¸ªExcelå¯¼å‡ºï¼Œå¯å°†è®¾å¤‡åŸºæœ¬ä¿¡æ¯ã€ç”Ÿæˆçš„è®¾å¤‡æ ‡è¯†å…¨éƒ¨å…³è”å¯¼å‡ºï¼Œå·¥ä½œå®Œæˆã€‚

ç»è¿‡å‡ å¤©çš„å¼€å‘å·¥ä½œï¼Œå¼€å‘å“¥å“¥å°†ç²¾å¿ƒæ‰“ç£¨çš„å°å·¥å…·äº¤ç»™è¿ç»´å°å“¥ï¼Œè¿ç»´å°å“¥å“¥ä½¿ç”¨åæŠ•æ¥äº†èµè®¸çš„ç›®å…‰...

## é—®é¢˜

å‰é¢é“ºå«çš„è¯æœ‰ç‚¹å•°å—¦äº†ï¼Œå¼€å‘è¿™ä¸ªå°å·¥å…·æ—¶ï¼Œå¼€å‘å°å“¥é‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼š

xxxæ¥å£

![xxxæ¥å£](https://img1.dotnet9.com/2021/01/0102.jpg)

è¿™æ˜¯æŸä¸ªæ¥å£çš„ä¿¡æ¯ï¼Œ`Content-Type` æ˜¯ `application/x-www-form-urlencoded`,ä¸‹é¢å‚æ•°ä½¿ç”¨çš„`Form Data`ï¼Œå³å‚æ•°ä½¿ç”¨äº†`UrlEncode`ï¼Œæ¯”å¦‚æœªç¼–ç å‰çš„ä¸€ä¸ªå‚æ•°ï¼š

```json
"Content":"{"AP_Name":"HK_7889","IP":"192.168.0.1"}"
```

ç¼–ç å(å¯ä»¥ä½¿ç”¨è¿™ä¸ª[åœ¨çº¿URLç¼–ç è§£ç å·¥å…·](http://www.jsons.cn/urlencode/)éªŒè¯)ï¼š
```
"Content":"%7B%22AP_Name%22%3A%22HK_7889%22%2C%22IP%22%3A%2292.168.0.1%22%7D"
```

ä½¿ç”¨`Postman`æµ‹è¯•æ—¶ï¼Œæœªå¯¹å‚æ•°ä½¿ç”¨`UrlEncode`ï¼Œæ¥å£æµ‹è¯•æˆåŠŸ,å¼€å‘è¿™ä¸ªå°å·¥å…·æ—¶ï¼Œæœ‰3ä¸ªæ¥å£éƒ½æ˜¯ç±»ä¼¼çš„ï¼Œæœªè¿›è¡Œ`UrlEncode`æ“ä½œï¼š

```C#
var client = new RestClient("http://admin.lqclass.com/api/device");
client.Timeout = -1;
var request = new RestRequest(Method.POST);
request.AddHeader("Content-Type", "application/x-www-form-urlencoded");
request.AddParameter("Content", "{\"AP_Name\":\"HK_7889\",\"IP\":\"92.168.0.1\"}");
IRestResponse response = client.Execute(request);
Console.WriteLine(response.Content);
```

ä½†é‡åˆ°ç¨å¾®å¤æ‚ä¸€ç‚¹çš„æ¥å£ï¼Œæ¯”å¦‚æˆªå›¾ä¸­çš„å‚æ•°ä¸ºï¼š

```json
"Content":"{"AP_Name":"HK_7889","IP":"192.168.0.1","Module":[{"M_Name":"cameri0","Desc":"cameri0","AP_PUID":"54632325461320320"},{"M_Name":"cameri1","Desc":"cameri1","AP_PUID":"54636325461320320"},{"M_Name":"cameri2","Desc":"cameri2","AP_PUID":"54632325421320320"}]}"
```

`Content`å€¼æ ¼å¼åŒ–çœ‹å¾—æ¸…æ¥šä¸€ç‚¹ï¼Œ`Module`æ˜¯è®¾å¤‡å…³è”çš„æ¨¡å—ä¿¡æ¯ï¼š

```json
{
  "AP_Name": "HK_7889",
  "IP": "192.168.0.1",
  "Module": [
    {
      "M_Name": "cameri0",
      "Desc": "cameri0",
      "AP_PUID": "54632325461320320"
    },
    {
      "M_Name": "cameri1",
      "Desc": "cameri1",
      "AP_PUID": "54636325461320320"
    },
    {
      "M_Name": "cameri2",
      "Desc": "cameri2",
      "AP_PUID": "54632325421320320"
    }
  ]
}
```

å®é™…`UrlEncode`åçš„å‚æ•°ä¸ºï¼š
```
"Content":"%7B%22AP_Name%22%3A%22HK_7889%22%2C%22IP%22%3A%22192.168.0.1%22%2C%22Module%22%3A%22%255B%257B%2522M_Name%2522%253A%2522cameri0%2522%252C%2522Desc%2522%253A%2522cameri0%2522%252C%2522AP_PUID%2522%253A%252254632325461320320%2522%257D%252C%257B%2522M_Name%2522%253A%2522cameri1%2522%252C%2522Desc%2522%253A%2522cameri1%2522%252C%2522AP_PUID%2522%253A%252254636325461320320%2522%257D%252C%257B%2522M_Name%2522%253A%2522cameri2%2522%252C%2522Desc%2522%253A%2522cameri2%2522%252C%2522AP_PUID%2522%253A%252254632325421320320%2522%257D%255D%22%7D"
```

æœ¬æ¥ä¸€èˆ¬æ¥å£ï¼Œå¦‚ä¸Šé¢æˆåŠŸæ‰§è¡Œçš„C#ä»£ç é‚£èˆ¬ç›´æ¥æœª`UrlEncode`è°ƒç”¨æ˜¯æ²¡é—®é¢˜çš„ã€‚

ä½†è¿™ä¸ªæ¥å£è°ƒç”¨ï¼ŒæœåŠ¡å™¨è¿”å›é”™è¯¯ä¿¡æ¯ï¼šâ€œxxxè§£æå¤±è´¥â€ï¼Œè°ƒç”¨ä»£ç å¦‚ä¸‹ï¼š
```C#
var client = new RestClient("http://admin.lqclass.com/api/device");
client.Timeout = -1;
var request = new RestRequest(Method.POST);
request.AddHeader("Content-Type", "application/x-www-form-urlencoded");
request.AddParameter("Content", "{\"AP_Name\":\"HK_7889\",\"IP\":\"192.168.0.1\",\"Module\":[{\"M_Name\":\"cameri0\",\"Desc\":\"cameri0\",\"AP_PUID\":\"54632325461320320\"},{\"M_Name\":\"cameri1\",\"Desc\":\"cameri1\",\"AP_PUID\":\"54636325461320320\"},{\"M_Name\":\"cameri2\",\"Desc\":\"cameri2\",\"AP_PUID\":\"54632325421320320\"}]}");
IRestResponse response = client.Execute(request);
Console.WriteLine(response.Content);
```

ä¸¤å¤„è°ƒç”¨ä»£ç å“ªé‡Œä¸åŒï¼Ÿåªæ˜¯Contentå€¼ä¸ä¸€æ ·ï¼Œæœ€åæ€€ç–‘æ˜¯ä¸æ˜¯éœ€è¦æ‰‹åŠ¨è¿›è¡Œ`UrlEncode`ï¼Ÿåˆä¸æ˜¯urlå‚æ•°ï¼Œä¸ºå•¥éœ€è¦ç¼–ç å‘¢ï¼Ÿä¸ç®¡å•¦ï¼Œå…ˆç¼–ç äº†å†è¯´ã€‚

## é—®é¢˜è§£å†³

å‚æ•°ç¼–ç åï¼Œè°ƒç”¨ï¼š

```C#
var client = new RestClient("http://admin.lqclass.com/api/device");
client.Timeout = -1;
var request = new RestRequest(Method.POST);
request.AddHeader("Content-Type", "application/x-www-form-urlencoded");
request.AddParameter("Content", "%7B%22AP_Name%22%3A%22HK_7889%22%2C%22IP%22%3A%22192.168.0.1%22%2C%22Module%22%3A%22%255B%257B%2522M_Name%2522%253A%2522cameri0%2522%252C%2522Desc%2522%253A%2522cameri0%2522%252C%2522AP_PUID%2522%253A%252254632325461320320%2522%257D%252C%257B%2522M_Name%2522%253A%2522cameri1%2522%252C%2522Desc%2522%253A%2522cameri1%2522%252C%2522AP_PUID%2522%253A%252254636325461320320%2522%257D%252C%257B%2522M_Name%2522%253A%2522cameri2%2522%252C%2522Desc%2522%253A%2522cameri2%2522%252C%2522AP_PUID%2522%253A%252254632325421320320%2522%257D%255D%22%7D");
IRestResponse response = client.Execute(request);
Console.WriteLine(response.Content);
```

å“ˆå“ˆï¼ŒæˆåŠŸäº†ï¼Œè¿™é‡Œç®€å•çŒœæµ‹ä¸‹ï¼šåˆ«äººçš„æœåŠ¡å¯¹æ¥æ”¶çš„å‚æ•°å¯èƒ½åšäº†`UrlDecode`æ“ä½œã€‚

å…¶å®ä¸­é—´è¿˜åšäº†ä¸€ä¸ªå‚æ•°çš„`UrlEncode`æ“ä½œï¼Œå³ä¸‹é¢çš„`Module`å‚æ•°å€¼ï¼š

```
"Content":{"AP_Name":"HK_7889","IP":"192.168.0.1","Module":[{"M_Name":"cameri0","Desc":"cameri0","AP_PUID":"54632325461320320"},{"M_Name":"cameri1","Desc":"cameri1","AP_PUID":"54636325461320320"},{"M_Name":"cameri2","Desc":"cameri2","AP_PUID":"54632325421320320"}]}
```

ç¬¬ä¸€æ¬¡`UrlEncode`ï¼Œå³å…ˆå¯¹`Module`çš„å€¼è¿›è¡Œ`UrlEncode`ï¼š

```json
"Content"ï¼š{"AP_Name":"HK_7889","IP":"192.168.0.1","Module":%5B%7B%22M_Name%22%3A%22cameri0%22%2C%22Desc%22%3A%22cameri0%22%2C%22AP_PUID%22%3A%2254632325461320320%22%7D%2C%7B%22M_Name%22%3A%22cameri1%22%2C%22Desc%22%3A%22cameri1%22%2C%22AP_PUID%22%3A%2254636325461320320%22%7D%2C%7B%22M_Name%22%3A%22cameri2%22%2C%22Desc%22%3A%22cameri2%22%2C%22AP_PUID%22%3A%2254632325421320320%22%7D%5D}
```

ç¬¬äºŒæ¬¡`UrlEncode`å³æ˜¯ä¸Šé¢æˆåŠŸçš„å‚æ•°æ–¹å¼äº†ï¼Œå¯¹æ•´ä¸ª`Content`çš„å€¼è¿›è¡Œ`UrlEncode`ï¼Œçœ‹ä¸Šé¢æˆåŠŸçš„å‚æ•°ï¼Œä¸é‡å¤è´´äº†ã€‚

## æœ€åæ€»ç»“

æŠ“åˆ«äººæ•°æ®åŒ…æ—¶ï¼Œä¸è¦å‡­å°è±¡ã€å·²æœ‰çŸ¥è¯†åˆ¤å®šè¯¥æ€ä¹ˆæ€ä¹ˆåšï¼Œæ¯”å¦‚å‰é¢çš„å‚æ•°ï¼Œä¸ä½¿ç”¨`UrlEncode`æ—¶ï¼Œè°ƒç”¨æˆåŠŸäº†ï¼Œå…¶ä»–åŒ…æˆ‘æ˜¯å¦ä¹Ÿæ²¿ç”¨ç›¸åŒçš„æ–¹å¼ä½¿ç”¨å°±æ­£ç¡®å‘¢ï¼Ÿæä¸å®šæ—¶ï¼Œå¤šå°è¯•çŒœæµ‹çš„æ–¹æ³•ã€‚

æ€»ç»“ï¼šâ€œç®¡ä»–çš„ï¼Œå¹²å°±æ˜¯äº†â€ã€‚

æœ¬æ–‡ä½¿ç”¨çš„`UrlEncode` C# ä»£ç ï¼š

```C#
public static string UrlEncode(string str)
{
    StringBuilder sb = new StringBuilder();
    byte[] byStr = System.Text.Encoding.UTF8.GetBytes(str); //é»˜è®¤æ˜¯System.Text.Encoding.Default.GetBytes(str)
    for (int i = 0; i < byStr.Length; i++)
    {
        sb.Append(@"%" + Convert.ToString(byStr[i], 16));
    }

    return (sb.ToString());
}
```

- æœ¬æ–‡Markdownï¼š[ç‚¹å‡»æµè§ˆ](https://github.com/dotnet9/dotnet9.com/blob/develop/doc/blog_contents/uploads/2021/01/2021-01-09_01.md)

- æœ¬æ–‡åšæ–‡åœ°å€ï¼š[ç‚¹å‡»æµè§ˆ](https://dotnet9.com/790)